---
name: 初始化命令增强
status: pending
created: 2025-09-28T07:59:05Z
updated: 2025-09-28T07:59:05Z
github: [Will be updated when synced to GitHub]
depends_on: [001, 003]
parallel: false
conflicts_with: []
---

# Task: 初始化命令增强

## Description

基于前置检查+规则模式，增强`/pm:init`命令支持平台选择和配置生成。通过向导式流程引导用户选择GitHub或云效平台，生成`.claude/ccpm.config`配置文件，并验证平台连接。

## Acceptance Criteria

- [ ] `/pm:init`命令支持平台选择（GitHub/云效）
- [ ] 自动检测并创建`.claude/ccpm.config`配置文件
- [ ] 云效平台初始化时验证MCP连接可用性
- [ ] 引导用户配置云效项目ID和工作空间映射
- [ ] 生成初始化报告，显示配置状态和下一步操作
- [ ] 保持现有GitHub初始化流程完全不变
- [ ] 支持混合项目配置（同时支持GitHub和云效）

## Technical Details

- **Implementation approach**:
  - 扩展现有`/pm:init`命令，增加平台检测和选择逻辑
  - 利用配置系统（Task 001）和适配器框架（Task 003）
  - 实现交互式配置向导，简化用户设置过程
  - 集成MCP连接验证和错误处理机制

- **Key considerations**:
  - 必须保持向后兼容性，现有GitHub项目不受影响
  - 云效特有的项目管理与代码管理分离架构处理
  - MCP连接失败时的优雅降级和错误指导
  - 配置文件格式的可扩展性，支持未来其他平台

- **Code locations/files affected**:
  - `.claude/commands/pm/init.md` - 主要命令文件增强
  - `.claude/scripts/pm/init.sh` - 初始化脚本扩展
  - `.claude/rules/platform-config.md` - 平台配置验证规则

## Dependencies

- [ ] Task 001: 配置系统 - 需要`.claude/ccpm.config`格式定义
- [ ] Task 003: MCP集成 - 需要云效MCP工具可用性验证

## Effort Estimate

- Size: M
- Hours: 4-6 hours
- Parallel: false (依赖配置系统和MCP集成完成)

## Definition of Done

- [ ] `/pm:init`命令成功支持云效平台初始化
- [ ] 配置向导流程完整且用户友好
- [ ] MCP连接验证机制工作正常
- [ ] 错误处理和用户指导消息清晰
- [ ] 现有GitHub初始化流程完全不受影响
- [ ] 生成的配置文件格式正确且可被其他组件识别
- [ ] 端到端测试验证初始化流程完整性